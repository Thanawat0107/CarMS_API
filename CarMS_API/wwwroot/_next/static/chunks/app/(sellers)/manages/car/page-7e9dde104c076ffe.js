(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{4149:function(e,t,s){e.exports=function(e,t){"use strict";let s=[{key:"title",getter:e=>e.getTitle()},{key:"html",getter:e=>e.getHtmlContainer()},{key:"confirmButtonText",getter:e=>e.getConfirmButton()},{key:"denyButtonText",getter:e=>e.getDenyButton()},{key:"cancelButtonText",getter:e=>e.getCancelButton()},{key:"footer",getter:e=>e.getFooter()},{key:"closeButtonHtml",getter:e=>e.getCloseButton()},{key:"iconHtml",getter:e=>e.getIconContent()},{key:"loaderHtml",getter:e=>e.getLoader()}],n=()=>{};return function(r){function c(t){let n={},r={},c=s.map(e=>e.key);return Object.entries(t).forEach(t=>{let[s,a]=t;c.includes(s)&&e.isValidElement(a)?(n[s]=a,r[s]=" "):r[s]=a}),[n,r]}function a(e,n){Object.entries(n).forEach(n=>{let[c,a]=n,l=s.find(e=>e.key===c).getter(r),i=t.createRoot(l);i.render(a),e.__roots.push(i)})}function l(e){e.__roots.forEach(e=>{e.unmount()}),e.__roots=[]}return class extends r{static argsToParams(t){if(!(e.isValidElement(t[0])||e.isValidElement(t[1])))return r.argsToParams(t);{let e={};return["title","html","icon"].forEach((s,n)=>{void 0!==t[n]&&(e[s]=t[n])}),e}}_main(e,t){this.__roots=[],this.__params=Object.assign({},t,e);let[s,r]=c(this.__params),i=r.willOpen||n,d=r.didOpen||n,h=r.didDestroy||n;return super._main(Object.assign({},r,{willOpen:e=>{a(this,s),i(e)},didOpen:e=>{setTimeout(()=>{d(e)})},didDestroy:e=>{h(e),l(this)}}))}update(e){Object.assign(this.__params,e),l(this);let[t,s]=c(this.__params);super.update(s),a(this,t)}}}}(s(2115),s(2669))},4896:(e,t,s)=>{Promise.resolve().then(s.bind(s,8381))},8381:(e,t,s)=>{"use strict";s.d(t,{default:()=>N});var n=s(5155),r=s(7864),c=s(5695),a=s(2115),l=s(5964),i=s.n(l),d=s(6980),h=s(9658),o=s(9250),x=s(4752),m=s.n(x),u=s(4149),j=s.n(u),g=s(559);let p=j()(m());function N(){var e;let[t,s]=(0,a.useState)(h.c),[l,x]=(0,a.useState)(""),m=(0,a.useMemo)(()=>i()(e=>{s(t=>({...t,searchTerm:e,pageNumber:1}))},500),[]);(0,a.useEffect)(()=>(m(l),()=>m.cancel()),[l]);let{data:u,error:j,isLoading:N}=(0,r.LQ)(t),[f]=(0,r.CW)(),b=(0,c.useRouter)(),y=e=>{b.push("/manages/car/edit/"+e)},_=async e=>{if((await p.fire({title:"คุณแน่ใจหรือไม่?",text:"การลบรถยนต์คันนี้จะไม่สามารถกู้คืนได้!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"ใช่, ลบเลย!",cancelButtonText:"ยกเลิก"})).isConfirmed)try{await f(e).unwrap(),await p.fire("ลบแล้ว!","รถยนต์คันนี้ถูกลบเรียบร้อยแล้ว","success")}catch(e){await p.fire("เกิดข้อผิดพลาด","ไม่สามารถลบรถยนต์คันนี้ได้","error")}},v=null!=(e=null==u?void 0:u.result)?e:[],k=null==u?void 0:u.meta;return N?(0,n.jsx)("p",{className:"p-4 text-gray-500",children:"กำลังโหลด..."}):j?(0,n.jsx)("p",{className:"p-4 text-red-500",children:"เกิดข้อผิดพลาดในการโหลดรถ"}):(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-10 px-4 md:px-10",children:(0,n.jsxs)("div",{className:"space-y-4 w-full",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,n.jsx)("button",{onClick:()=>b.push("/manages/car/create"),className:"px-4 py-2 bg-primary hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm",children:"เพิ่มรถใหม่"}),(0,n.jsx)(d.Ay,{filters:t,setFilters:s,search:l,setSearch:x})]}),(0,n.jsx)("div",{className:"overflow-x-auto w-full",children:(0,n.jsxs)("table",{className:"table w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"text-center",children:"ลำดับ"}),(0,n.jsx)("th",{className:"text-center",children:"แบรนด์"}),(0,n.jsx)("th",{className:"text-center",children:"ป้ายทะเบียน"}),(0,n.jsx)("th",{className:"text-center",children:"รุ่น"}),(0,n.jsx)("th",{className:"text-center",children:"ปีผลิต"}),(0,n.jsx)("th",{className:"text-center",children:"สี"}),(0,n.jsx)("th",{className:"text-center",children:"ราคา"}),(0,n.jsx)("th",{className:"text-center",children:"ราคาจอง"}),(0,n.jsx)("th",{className:"text-center",children:"รูปภาพ"}),(0,n.jsx)("th",{className:"text-center",children:"ใช้งาน"}),(0,n.jsx)("th",{className:"text-center",children:"สถานะ"}),(0,n.jsx)("th",{className:"text-center",children:"จัดการ"})]})}),(0,n.jsx)("tbody",{children:v.map(e=>{var t,s,r,c,a,l;return(0,n.jsxs)("tr",{className:"text-center align-middle",children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{className:"font-medium",children:null!=(s=null==(t=e.brand)?void 0:t.name)?s:"-"}),(0,n.jsx)("td",{children:null!=(r=e.carRegistrationNumber)?r:"-"}),(0,n.jsx)("td",{children:null!=(c=e.model)?c:"-"}),(0,n.jsx)("td",{children:null!=(a=e.year)?a:"-"}),(0,n.jsx)("td",{children:null!=(l=e.color)?l:"-"}),(0,n.jsxs)("td",{children:[e.price.toLocaleString()," ฿"]}),(0,n.jsxs)("td",{children:[e.reservationPrice.toLocaleString()," ฿"]}),(0,n.jsx)("td",{children:(0,n.jsx)("div",{className:"avatar flex justify-center",children:(0,n.jsx)("div",{className:"mask mask-squircle w-24 h-24",children:(0,n.jsx)("img",{src:g.p+e.imageUrl||"/placeholder.png",alt:"รูปภาพรถ",className:"object-cover"})})})}),(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"checkbox",checked:e.isUsed,className:"toggle toggle-success",readOnly:!0})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"badge ".concat(e.isApproved?"badge-success":"badge-warning"),children:e.isApproved?"อนุมัติแล้ว":"รอตรวจสอบ"})}),(0,n.jsx)("td",{children:(0,n.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,n.jsx)("button",{className:"btn btn-sm btn-outline btn-warning",onClick:()=>y(e.id),children:"แก้ไข"}),(0,n.jsx)("button",{className:"btn btn-sm btn-outline btn-error",onClick:()=>_(e.id),children:"ลบ"})]})})]},e.id)})}),(0,n.jsx)("tfoot",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"text-center",children:"ลำดับ"}),(0,n.jsx)("th",{className:"text-center",children:"รถยนต์คันนี้"}),(0,n.jsx)("th",{className:"text-center",children:"ทะเบียน"}),(0,n.jsx)("th",{className:"text-center",children:"รุ่น"}),(0,n.jsx)("th",{className:"text-center",children:"ปี"}),(0,n.jsx)("th",{className:"text-center",children:"สี"}),(0,n.jsx)("th",{className:"text-center",children:"ราคา"}),(0,n.jsx)("th",{className:"text-center",children:"ราคาจอง"}),(0,n.jsx)("th",{className:"text-center",children:"รูปภาพ"}),(0,n.jsx)("th",{className:"text-center",children:"ใช้งาน"}),(0,n.jsx)("th",{className:"text-center",children:"สถานะ"}),(0,n.jsx)("th",{className:"text-center",children:"จัดการ"})]})})]})}),k&&(0,n.jsx)(o.A,{pagination:k,onPageChange:e=>{s(t=>({...t,pageNumber:e}))}})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[320,404,169,811,441,684,358],()=>t(4896)),_N_E=e.O()}]);