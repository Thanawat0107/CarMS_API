(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{559:(e,l,s)=>{"use strict";s.d(l,{D:()=>r,p:()=>t});let t="https://localhost:7001",r=t+"/api/"},2072:(e,l,s)=>{"use strict";s.d(l,{z:()=>r});var t=s(5155);let r=e=>{let{label:l,value:s,onChange:r,options:a,placeholder:n="ทั้งหมด"}=e;return(0,t.jsxs)("div",{className:"w-full mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("select",{className:"w-full border rounded-xl px-4 py-3 border-gray-300 focus:outline-neutral",value:s||"",onChange:e=>r(e.target.value),children:[(0,t.jsx)("option",{value:"",children:n}),a.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]})})]})}},2227:(e,l,s)=>{"use strict";s.d(l,{Ay:()=>x,HN:()=>d,Hw:()=>o,Qs:()=>i,VO:()=>u,eU:()=>c});var t=s(404),r=s(4317),a=s(559);let n=(0,t.xP)({reducerPath:"sellerApi",baseQuery:(0,r.cw)({baseUrl:a.D}),tagTypes:["Seller"],endpoints:e=>({getSellerAll:e.query({query:e=>({url:"sellers/getall",method:"GET",params:e}),keepUnusedDataFor:300,transformResponse:async e=>{var l;return{result:null!=(l=e.result)?l:[],meta:e.meta}},providesTags:["Seller"]}),getSellerById:e.query({query:e=>({url:"sellers/getbyid/".concat(e),method:"GET"}),keepUnusedDataFor:300,transformResponse:async e=>{if(e.result)return e.result;throw Error(e.message)},providesTags:(e,l,s)=>[{type:"Seller",sellerId:s}]}),createSeller:e.mutation({query:e=>({url:"sellers/create",method:"POST",body:e}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Seller"]}),updateSeller:e.mutation({query:e=>{let{sellerId:l,sellerData:s}=e;return{url:"sellers/update/".concat(l),method:"PUT",body:s}},transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:(e,l,s)=>{let{sellerId:t}=s;return[{type:"Seller",sellerId:t}]}}),deleteSeller:e.mutation({query:e=>({url:"sellers/delete/".concat(e),method:"DELETE"}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Seller"]})})}),{useGetSellerAllQuery:i,useGetSellerByIdQuery:d,useCreateSellerMutation:c,useUpdateSellerMutation:u,useDeleteSellerMutation:o,usePrefetch:m}=n,x=n},4614:(e,l,s)=>{"use strict";s.d(l,{F:()=>d});var t=s(5155),r=s(8749),a=s(2657),n=s(2115),i=s(7676);let d=e=>{let{label:l,name:s,type:d="text",value:c,onChange:u,onBlur:o,placeholder:m=" ",error:x,touched:h,required:b=!1,readOnly:p,disabled:g}=e,[j,f]=(0,n.useState)(!1),v="password"===d,N=v?j?"text":"password":d,y=x&&h;return(0,t.jsxs)("div",{className:"w-full mb-4",children:[(0,t.jsxs)("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 mb-1",children:[l,b&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:N,name:s,id:s,value:c,onChange:u,onBlur:o,placeholder:m,readOnly:p,disabled:g,className:(0,i.A)("w-full border rounded-xl px-4 py-3",y?"border-red-500 focus:outline-red-500":"border-gray-300 focus:outline-neutral",v&&"pr-12")}),v&&(0,t.jsx)("button",{type:"button",onClick:()=>f(e=>!e),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:bg-gray-100 rounded-full transition",children:j?(0,t.jsx)(r.A,{size:18}):(0,t.jsx)(a.A,{size:18})})]}),y&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1 ml-1",children:x})]})}},5316:(e,l,s)=>{"use strict";s.d(l,{A:()=>r});var t=s(5155);s(2115);let r=e=>{let{label:l="ค้นหา",value:s,onChange:r,placeholder:a}=e;return(0,t.jsxs)("div",{className:"w-full mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("input",{type:"text",placeholder:null!=a?a:l,className:"w-full border rounded-xl px-4 py-3 border-gray-300 focus:outline-neutral",value:s,onChange:e=>r(e.target.value)})})]})}},6176:(e,l,s)=>{"use strict";s.d(l,{default:()=>y});var t=s(5155),r=s(2227),a=s(5695),n=s(2115),i=s(5964),d=s.n(i),c=s(4752),u=s.n(c),o=s(4149),m=s.n(o),x=s(9250),h=s(4614),b=s(2072),p=s(5316);let g=[{value:"true",label:"ยืนยันแล้ว"},{value:"false",label:"ยังไม่ยืนยัน"}],j=[{value:"id",label:"ล่าสุด"},{value:"userid",label:"รหัสผู้ใช้ น้อย → มาก"},{value:"userid_desc",label:"รหัสผู้ใช้ มาก → น้อย"},{value:"identitynumber",label:"เลขบัตร น้อย → มาก"},{value:"identitynumber_desc",label:"เลขบัตร มาก → น้อย"},{value:"isverified",label:"สถานะ: ยังไม่ยืนยัน → ยืนยันแล้ว"},{value:"isverified_desc",label:"สถานะ: ยืนยันแล้ว → ยังไม่ยืนยัน"}],f=e=>{var l,s,r,a;let{filters:n,setFilters:i,search:d,setSearch:c}=e,u=(e,l)=>{i(s=>({...s,[e]:l,pageNumber:1}))};return(0,t.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-700",children:"\uD83D\uDD0D ค้นหาผู้ขาย"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>{i({pageNumber:1,pageSize:10,isVerified:!1}),c("")},className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg shadow-sm",children:"♻️ รีเซต"}),(0,t.jsx)("button",{onClick:()=>i({...n,pageNumber:1}),className:"px-4 py-2 bg-primary hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm",children:"\uD83D\uDD0D ค้นหา"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(p.A,{value:d,onChange:c,placeholder:"ค้นหาชื่อผู้ใช้ หรือ ชื่อเต็ม"}),(0,t.jsx)(h.F,{label:"เลขบัตรประชาชน",placeholder:"ค้นหาเลขบัตรประชาชน",value:null!=(s=n.identityNumber)?s:"",onChange:e=>u("identityNumber",e)}),(0,t.jsx)(h.F,{label:"ที่อยู่",placeholder:"ค้นหาที่อยู่",value:null!=(r=n.address)?r:"",onChange:e=>u("address",e)}),(0,t.jsx)(b.z,{label:"สถานะยืนยันตัวตน",value:null==(l=n.isVerified)?void 0:l.toString(),onChange:e=>u("isVerified",""===e?void 0:"true"===e),options:g,placeholder:"เลือกสถานะ"}),(0,t.jsx)(b.z,{label:"เรียงตาม",value:null!=(a=n.sortBy)?a:"",onChange:e=>u("sortBy",e),options:j,placeholder:"เลือกการเรียง"})]})]})},v={userSearchTerm:"",identityNumber:"",address:"",isVerified:!0,sortBy:"id",pageNumber:1,pageSize:5},N=m()(u());function y(){var e;let[l,s]=(0,n.useState)(v),[i,c]=(0,n.useState)(""),u=(0,n.useMemo)(()=>d()(e=>{s(l=>({...l,searchTerm:e,pageNumber:1}))},500),[]);(0,n.useEffect)(()=>(u(i),()=>u.cancel()),[i]);let{data:o,error:m,isLoading:h}=(0,r.Qs)(l),[b]=(0,r.Hw)(),p=(0,a.useRouter)(),g=e=>{p.push("/manages/seller/edit/"+e)},j=async e=>{if((await N.fire({title:"คุณแน่ใจหรือไม่?",text:"การลบผู้ขายรายนี้จะไม่สามารถกู้คืนได้!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"ใช่, ลบเลย!",cancelButtonText:"ยกเลิก"})).isConfirmed)try{await b(e).unwrap(),await N.fire("ลบแล้ว!","ผู้ขายถูกลบเรียบร้อยแล้ว","success")}catch(e){await N.fire("เกิดข้อผิดพลาด","ไม่สามารถลบผู้ขายรายนี้ได้","error")}},y=null!=(e=null==o?void 0:o.result)?e:[],w=null==o?void 0:o.meta;return h?(0,t.jsx)("p",{className:"p-4 text-gray-500",children:"กำลังโหลด..."}):m?(0,t.jsx)("p",{className:"p-4 text-red-500",children:"เกิดข้อผิดพลาดในการโหลดผู้ขาย"}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-10 px-4 md:px-10",children:(0,t.jsxs)("div",{className:"space-y-4 w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,t.jsx)("button",{onClick:()=>p.push("/manages/seller/create"),className:"px-4 py-2 bg-primary hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm",children:"เพิ่มผู้ขายใหม่"}),(0,t.jsx)(f,{filters:l,setFilters:s,search:i,setSearch:c})]}),(0,t.jsx)("div",{className:"overflow-x-auto w-full",children:(0,t.jsxs)("table",{className:"table w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-center",children:"ลำดับ"}),(0,t.jsx)("th",{className:"text-center",children:"ชื่อผู้ใช้งาน"}),(0,t.jsx)("th",{className:"text-center",children:"ชื่อ-นามสกุล"}),(0,t.jsx)("th",{className:"text-center",children:"เลขบัตรประชาชน"}),(0,t.jsx)("th",{className:"text-center",children:"ที่อยู่"}),(0,t.jsx)("th",{className:"text-center",children:"สถานะยืนยันตัวตน"}),(0,t.jsx)("th",{className:"text-center",children:"จัดการ"})]})}),(0,t.jsx)("tbody",{children:y.map(e=>{var l,s,r,a;return(0,t.jsxs)("tr",{className:"text-center align-middle",children:[(0,t.jsx)("td",{children:e.id}),(0,t.jsx)("td",{children:null!=(r=null==(l=e.user)?void 0:l.userName)?r:"-"}),(0,t.jsx)("td",{children:null!=(a=null==(s=e.user)?void 0:s.fullName)?a:"-"}),(0,t.jsx)("td",{children:e.identityNumber}),(0,t.jsx)("td",{children:e.address}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge ".concat(e.isVerified?"badge-success":"badge-warning"),children:e.isVerified?"ยืนยันแล้ว":"ยังไม่ยืนยัน"})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,t.jsx)("button",{className:"btn btn-sm btn-outline btn-warning",onClick:()=>g(e.id),children:"แก้ไข"}),(0,t.jsx)("button",{className:"btn btn-sm btn-outline btn-error",onClick:()=>j(e.id),children:"ลบ"})]})})]},e.id)})}),(0,t.jsx)("tfoot",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-center",children:"ลำดับ"}),(0,t.jsx)("th",{className:"text-center",children:"ชื่อผู้ใช้งาน"}),(0,t.jsx)("th",{className:"text-center",children:"ชื่อ-นามสกุล"}),(0,t.jsx)("th",{className:"text-center",children:"เลขบัตรประชาชน"}),(0,t.jsx)("th",{className:"text-center",children:"ที่อยู่"}),(0,t.jsx)("th",{className:"text-center",children:"สถานะ"}),(0,t.jsx)("th",{className:"text-center",children:"จัดการ"})]})})]})}),w&&(0,t.jsx)(x.A,{pagination:w,onPageChange:e=>{s(l=>({...l,pageNumber:e}))}})]})})}},6974:(e,l,s)=>{Promise.resolve().then(s.bind(s,6176))},9250:(e,l,s)=>{"use strict";s.d(l,{A:()=>r});var t=s(5155);function r(e){let{pagination:l,onPageChange:s}=e,{pageNumber:r,pageCount:a}=l;return a<=1?null:(0,t.jsxs)("div",{className:"flex gap-2 mt-4 justify-center flex-wrap",children:[(0,t.jsx)("button",{className:"btn btn-sm join-item",disabled:1===r,onClick:()=>s(r-1),children:"ก่อนหน้า"}),Array.from({length:a},(e,l)=>l+1).map(e=>(0,t.jsx)("button",{onClick:()=>s(e),className:"btn btn-sm join-item ".concat(e===r?"btn-primary":"btn-outline"),children:e},e)),(0,t.jsx)("button",{className:"btn btn-sm join-item",disabled:r===a,onClick:()=>s(r+1),children:"ถัดไป"})]})}s(2115)}},e=>{var l=l=>e(e.s=l);e.O(0,[320,404,133,441,684,358],()=>l(6974)),_N_E=e.O()}]);