(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[753],{1809:(e,s,r)=>{"use strict";r.d(s,{Ay:()=>x,HD:()=>o,L:()=>i,Mu:()=>c,bQ:()=>u,g7:()=>d});var a=r(404),t=r(4317),l=r(559);let n=(0,a.xP)({reducerPath:"brandApi",baseQuery:(0,t.cw)({baseUrl:l.D}),tagTypes:["Brand"],endpoints:e=>({getBrandAll:e.query({query:e=>({url:"brands/getall",method:"GET",params:e}),keepUnusedDataFor:300,transformResponse:async e=>{var s;return{result:null!=(s=e.result)?s:[],meta:e.meta}},providesTags:["Brand"]}),getBrandById:e.query({query:e=>({url:"brands/getbyid/".concat(e),method:"GET"}),keepUnusedDataFor:300,transformResponse:async e=>{if(e.result)return e.result;throw Error(e.message)},providesTags:(e,s,r)=>[{type:"Brand",brandId:r}]}),createBrand:e.mutation({query:e=>({url:"brands/create",method:"POST",body:e}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Brand"]}),updateBrand:e.mutation({query:e=>{let{formData:s,brandId:r}=e;return{url:"brands/update/".concat(r),method:"PUT",body:s}},transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Brand"]}),deleteBrand:e.mutation({query:e=>({url:"brands/delete/".concat(e),method:"PUT"}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Brand"]})})}),{useGetBrandAllQuery:d,useGetBrandByIdQuery:i,useCreateBrandMutation:c,useUpdateBrandMutation:o,useDeleteBrandMutation:u,usePrefetch:m}=n,x=n},5893:(e,s,r)=>{Promise.resolve().then(r.bind(r,7929))},7929:(e,s,r)=>{"use strict";r.d(s,{default:()=>h});var a=r(5155),t=r(2115),l=r(7864),n=r(5695);function d(e){let{car:s}=e,r=(0,n.useRouter)();return(0,a.jsxs)("div",{className:"bg-gray-100 rounded-xl shadow hover:shadow-md transition-shadow duration-300 w-full",children:[(0,a.jsxs)("div",{className:"relative",onClick:()=>{r.push("/car/".concat(s.id))},children:[(0,a.jsx)("img",{src:s.imageUrl,alt:s.model,className:"aspect-[4/3] w-full object-cover rounded-t-xl"}),(0,a.jsx)("span",{className:"absolute top-2 left-2 bg-[var(--color-accent)] text-white text-xs font-semibold px-2 py-1 rounded",children:"TEST DRIVE"})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("h2",{className:"text-sm font-semibold mb-1 leading-tight",children:[s.year," ",s.brand.name," ",s.model]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"ไม่รวมภาษีมูลค่าเพิ่ม"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-[var(--color-accent)] mb-2",children:["฿ ",s.price.toLocaleString()]}),(0,a.jsxs)("div",{className:"flex flex-wrap text-xs text-gray-600 gap-x-2 gap-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:"\uD83D\uDE97"}),s.mileage.toLocaleString()," กม."]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:"\uD83C\uDFA8"}),"สี ",s.color]})]})]})]})}var i=r(9658),c=r(5964),o=r.n(c),u=r(9250),m=r(6980),x=r(8252),g=r(1809),p=r(559);function h(){var e,s;let[r,n]=(0,t.useState)(i.c),[c,h]=(0,t.useState)(""),[b,v]=(0,t.useState)(x.B),[f,j]=(0,t.useState)(""),[N,y]=(0,t.useState)(null),w=(0,t.useMemo)(()=>o()(e=>{n(s=>({...s,searchTerm:e,pageNumber:1}))},500),[]),T=(0,t.useMemo)(()=>o()(e=>{v(s=>({...s,searchTerm:e,pageNumber:1}))},500),[]);(0,t.useEffect)(()=>(w(c),()=>w.cancel()),[c]),(0,t.useEffect)(()=>(T(f),()=>T.cancel()),[f]),(0,t.useEffect)(()=>{n(e=>({...e,brandId:null!=N?N:void 0,pageNumber:1}))},[N]);let{data:B,isLoading:E,error:S}=(0,g.g7)(b),{data:U,isLoading:D,error:C}=(0,l.LQ)(r),k=null!=(e=null==B?void 0:B.result.filter(e=>e.isUsed).map(e=>({value:e.id.toString(),label:e.name,imageUrl:p.p+e.imageUrl})))?e:[],L=null!=(s=null==U?void 0:U.result)?s:[],q=null==U?void 0:U.meta,P=e=>{y(e===N?null:e)};return E||D?(0,a.jsx)("p",{className:"p-4 text-gray-500",children:"กำลังโหลด..."}):S?(0,a.jsx)("p",{className:"p-4 text-red-500",children:"โหลดแบรนด์ไม่สำเร็จ"}):C?(0,a.jsx)("p",{className:"p-4 text-red-500",children:"โหลดรถไม่สำเร็จ"}):(0,a.jsxs)("div",{className:"min-h-screen bg-white py-10 px-4 md:px-10",children:[(0,a.jsx)("h1",{className:"text-3xl text-[var(--foreground)] font-bold mb-6",children:"ค้นหารถยนต์ของเรา"}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(m.Ay,{filters:r,setFilters:n,search:c,setSearch:h})}),(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsxs)("div",{className:"w-1/4 bg-white rounded-lg shadow p-4 overflow-auto max-h-[600px]",children:[(0,a.jsx)("input",{type:"text",placeholder:"ค้นหาแบรนด์...",className:"input input-bordered w-full mb-4",value:f,onChange:e=>j(e.target.value)}),(0,a.jsx)("ul",{children:k.length>0?k.filter(e=>e.label.toLowerCase().includes(f.toLowerCase())).map(e=>(0,a.jsxs)("li",{onClick:()=>P(Number(e.value)),className:"cursor-pointer flex items-center gap-3 p-2 rounded ".concat(N===Number(e.value)?"bg-primary text-white":"hover:bg-gray-100"),children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.label,className:"w-8 h-8 object-contain rounded"}),(0,a.jsx)("span",{children:e.label})]},e.value)):(0,a.jsx)("p",{className:"text-gray-500",children:"ไม่พบแบรนด์ที่ค้นหา"})})]}),(0,a.jsxs)("div",{className:"w-3/4",children:[L.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:L.map(e=>(0,a.jsx)(d,{car:e},e.id))}):(0,a.jsx)("p",{className:"text-center text-gray-500",children:"ไม่พบรถยนต์ที่ตรงกับการค้นหา"}),q&&(0,a.jsx)("div",{className:"mt-8 flex justify-center",children:(0,a.jsx)(u.A,{pagination:q,onPageChange:e=>{n(s=>({...s,pageNumber:e}))}})})]})]})]})}},8252:(e,s,r)=>{"use strict";r.d(s,{B:()=>a});let a={searchTerm:"",isUsed:void 0,sortBy:"id",pageNumber:1,pageSize:100}}},e=>{var s=s=>e(e.s=s);e.O(0,[404,169,811,441,684,358],()=>s(5893)),_N_E=e.O()}]);