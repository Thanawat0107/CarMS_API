(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{559:(e,t,r)=>{"use strict";r.d(t,{D:()=>a,p:()=>s});let s="https://localhost:7001",a=s+"/api/"},784:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,LA:()=>n,ri:()=>o});var s=r(5710);let a={userId:"",userName:"",email:"",fullName:"",phoneNumber:"",role:"",token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token")},l=(0,s.Z0)({name:"auth",initialState:a,reducers:{setCredentials:(e,t)=>{let{userName:r,email:s,fullName:a,phoneNumber:l,role:n,token:o,userId:i}=t.payload;e.userId=i,e.userName=r,e.email=s,e.fullName=a,e.phoneNumber=l,e.role=n,e.token=o,e.isAuthenticated=!0,localStorage.setItem("token",o)},logout:e=>{e.userId="",e.userName="",e.email="",e.fullName="",e.phoneNumber="",e.role="",e.token=null,e.isAuthenticated=!1,localStorage.removeItem("token")}}}),{setCredentials:n,logout:o}=l.actions,i=l.reducer},1823:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var s=r(5155),a=r(2476),l=r(5695),n=r(9159),o=r(5374),i=r(784),u=r(4752),c=r.n(u),d=r(4149),h=r.n(d),m=r(9694),p=r(4614),f=r(7129);let x=f.Ik().shape({userName:f.Yj().required("กรุณากรอกชื่อผู้ใช้"),password:f.Yj().required("กรุณากรอกรหัสผ่าน")}),g=e=>{let{onSubmit:t,isSubmitting:r}=e,a=(0,m.Wx)({initialValues:{userName:"",password:""},validationSchema:x,onSubmit:t});return(0,s.jsxs)("form",{className:"space-y-4",onSubmit:a.handleSubmit,children:[(0,s.jsx)(p.F,{label:"ชื่อผู้ใช้",name:"userName",type:"text",value:a.values.userName,onChange:a.handleChange,onBlur:a.handleBlur,error:a.errors.userName,touched:a.touched.userName,placeholder:"เช่น kengdev123"}),(0,s.jsx)(p.F,{label:"รหัสผ่าน",name:"password",type:"password",value:a.values.password,onChange:a.handleChange,onBlur:a.handleBlur,error:a.errors.password,touched:a.touched.password,placeholder:"กรอกรหัสผ่านของคุณ"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("label",{className:"label cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"checkbox checkbox-sm mr-2"}),"จดจำฉันไว้"]}),(0,s.jsx)("a",{href:"/forgot-password",className:"link text-sm",children:"ลืมรหัสผ่าน?"})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-neutral w-full mt-2",disabled:r,children:r?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"})]})},b=h()(c());function w(){let e=(0,l.useRouter)(),t=(0,o.j)(),[r,{isLoading:u}]=(0,a._L)(),c=async s=>{try{let a=(await r(s).unwrap()).token,l=(0,n.s)(a);t((0,i.LA)({...l,userId:l.userId,userName:l.userName,token:a})),localStorage.setItem("token",a),await b.fire({icon:"success",title:"เข้าสู่ระบบสำเร็จ",confirmButtonText:"ไปหน้าหลัก"}),e.push("/")}catch(e){var a;await b.fire({icon:"error",title:"เข้าสู่ระบบล้มเหลว",text:(null==e||null==(a=e.data)?void 0:a.message)||"ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง"})}};return(0,s.jsx)("div",{className:"min-h-screen bg-base-200 flex items-center justify-center px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-4xl w-full bg-white rounded-2xl shadow-2xl flex flex-col lg:flex-row overflow-hidden",children:[(0,s.jsxs)("div",{className:"lg:w-1/2 bg-neutral text-white p-10 flex flex-col justify-center",children:[(0,s.jsx)("h2",{className:"text-4xl font-bold mb-4",children:"ยินดีต้อนรับอีกครั้ง!"}),(0,s.jsx)("p",{className:"mb-6 text-lg",children:"ยังไม่มีบัญชี? สมัครเลยตอนนี้ \uD83D\uDCA5"}),(0,s.jsx)("button",{className:"btn btn-outline text-white",onClick:()=>e.push("/register"),children:"สมัครสมาชิก"})]}),(0,s.jsxs)("div",{className:"lg:w-1/2 p-10",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-center mb-6",children:"เข้าสู่ระบบ"}),(0,s.jsx)(g,{onSubmit:c,isSubmitting:u})]})]})})}},2476:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,_L:()=>i,ge:()=>o});var s=r(404),a=r(4317),l=r(559);let n=(0,s.xP)({reducerPath:"authApi",baseQuery:(0,a.cw)({baseUrl:l.D}),tagTypes:["Auth"],endpoints:e=>({register:e.mutation({query:e=>({url:"auth/register",method:"POST",body:e}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Auth"]}),login:e.mutation({query:e=>({url:"auth/login",method:"POST",body:e}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Auth"]})})}),{useRegisterMutation:o,useLoginMutation:i}=n,u=n},2657:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3011:(e,t,r)=>{Promise.resolve().then(r.bind(r,1823))},4614:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var s=r(5155),a=r(8749),l=r(2657),n=r(2115),o=r(7676);let i=e=>{let{label:t,name:r,type:i="text",value:u,onChange:c,onBlur:d,placeholder:h=" ",error:m,touched:p,required:f=!1,readOnly:x,disabled:g}=e,[b,w]=(0,n.useState)(!1),y="password"===i,N=y?b?"text":"password":i,v=m&&p;return(0,s.jsxs)("div",{className:"w-full mb-4",children:[(0,s.jsxs)("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,f&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:N,name:r,id:r,value:u,onChange:c,onBlur:d,placeholder:h,readOnly:x,disabled:g,className:(0,o.A)("w-full border rounded-xl px-4 py-3",v?"border-red-500 focus:outline-red-500":"border-gray-300 focus:outline-neutral",y&&"pr-12")}),y&&(0,s.jsx)("button",{type:"button",onClick:()=>w(e=>!e),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:bg-gray-100 rounded-full transition",children:b?(0,s.jsx)(a.A,{size:18}):(0,s.jsx)(l.A,{size:18})})]}),v&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1 ml-1",children:m})]})}},5374:(e,t,r)=>{"use strict";r.d(t,{G:()=>l,j:()=>a});var s=r(4540);let a=()=>(0,s.wA)(),l=s.d4},7676:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=function(){for(var e,t,r=0,s="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s);else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}(e))&&(s&&(s+=" "),s+=t);return s}},8749:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},9159:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});class s extends Error{}function a(e,t){let r;if("string"!=typeof e)throw new s("Invalid token specified: must be a string");t||(t={});let a=+(!0!==t.header),l=e.split(".")[a];if("string"!=typeof l)throw new s(`Invalid token specified: missing part #${a+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return atob(t)}}(l)}catch(e){throw new s(`Invalid token specified: invalid base64 for part #${a+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new s(`Invalid token specified: invalid json for part #${a+1} (${e.message})`)}}s.prototype.name="InvalidTokenError"},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(2115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:c="",children:d,iconNode:h,...m}=e;return(0,s.createElement)("svg",{ref:t,...u,width:a,height:a,stroke:r,strokeWidth:n?24*Number(l)/Number(a):l,className:o("lucide",c),...!d&&!i(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:i,...u}=r;return(0,s.createElement)(c,{ref:l,iconNode:t,className:o("lucide-".concat(a(n(e))),"lucide-".concat(e),i),...u})});return r.displayName=n(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[320,404,34,441,684,358],()=>t(3011)),_N_E=e.O()}]);