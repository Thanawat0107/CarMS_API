(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},559:(e,r,t)=>{"use strict";t.d(r,{D:()=>s,p:()=>a});let a="https://localhost:7001",s=a+"/api/"},784:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>d,LA:()=>n,ri:()=>o});var a=t(5710);let s={userId:"",userName:"",email:"",fullName:"",phoneNumber:"",role:"",token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token")},l=(0,a.Z0)({name:"auth",initialState:s,reducers:{setCredentials:(e,r)=>{let{userName:t,email:a,fullName:s,phoneNumber:l,role:n,token:o,userId:d}=r.payload;e.userId=d,e.userName=t,e.email=a,e.fullName=s,e.phoneNumber=l,e.role=n,e.token=o,e.isAuthenticated=!0,localStorage.setItem("token",o)},logout:e=>{e.userId="",e.userName="",e.email="",e.fullName="",e.phoneNumber="",e.role="",e.token=null,e.isAuthenticated=!1,localStorage.removeItem("token")}}}),{setCredentials:n,logout:o}=l.actions,d=l.reducer},1809:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>p,HD:()=>u,L:()=>d,Mu:()=>i,bQ:()=>c,g7:()=>o});var a=t(404),s=t(4317),l=t(559);let n=(0,a.xP)({reducerPath:"brandApi",baseQuery:(0,s.cw)({baseUrl:l.D}),tagTypes:["Brand"],endpoints:e=>({getBrandAll:e.query({query:e=>({url:"brands/getall",method:"GET",params:e}),keepUnusedDataFor:300,transformResponse:async e=>{var r;return{result:null!=(r=e.result)?r:[],meta:e.meta}},providesTags:["Brand"]}),getBrandById:e.query({query:e=>({url:"brands/getbyid/".concat(e),method:"GET"}),keepUnusedDataFor:300,transformResponse:async e=>{if(e.result)return e.result;throw Error(e.message)},providesTags:(e,r,t)=>[{type:"Brand",brandId:t}]}),createBrand:e.mutation({query:e=>({url:"brands/create",method:"POST",body:e}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Brand"]}),updateBrand:e.mutation({query:e=>{let{formData:r,brandId:t}=e;return{url:"brands/update/".concat(t),method:"PUT",body:r}},transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Brand"]}),deleteBrand:e.mutation({query:e=>({url:"brands/delete/".concat(e),method:"PUT"}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Brand"]})})}),{useGetBrandAllQuery:o,useGetBrandByIdQuery:d,useCreateBrandMutation:i,useUpdateBrandMutation:u,useDeleteBrandMutation:c,usePrefetch:m}=n,p=n},2093:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},2227:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>p,HN:()=>d,Hw:()=>c,Qs:()=>o,VO:()=>u,eU:()=>i});var a=t(404),s=t(4317),l=t(559);let n=(0,a.xP)({reducerPath:"sellerApi",baseQuery:(0,s.cw)({baseUrl:l.D}),tagTypes:["Seller"],endpoints:e=>({getSellerAll:e.query({query:e=>({url:"sellers/getall",method:"GET",params:e}),keepUnusedDataFor:300,transformResponse:async e=>{var r;return{result:null!=(r=e.result)?r:[],meta:e.meta}},providesTags:["Seller"]}),getSellerById:e.query({query:e=>({url:"sellers/getbyid/".concat(e),method:"GET"}),keepUnusedDataFor:300,transformResponse:async e=>{if(e.result)return e.result;throw Error(e.message)},providesTags:(e,r,t)=>[{type:"Seller",sellerId:t}]}),createSeller:e.mutation({query:e=>({url:"sellers/create",method:"POST",body:e}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Seller"]}),updateSeller:e.mutation({query:e=>{let{sellerId:r,sellerData:t}=e;return{url:"sellers/update/".concat(r),method:"PUT",body:t}},transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:(e,r,t)=>{let{sellerId:a}=t;return[{type:"Seller",sellerId:a}]}}),deleteSeller:e.mutation({query:e=>({url:"sellers/delete/".concat(e),method:"DELETE"}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Seller"]})})}),{useGetSellerAllQuery:o,useGetSellerByIdQuery:d,useCreateSellerMutation:i,useUpdateSellerMutation:u,useDeleteSellerMutation:c,usePrefetch:m}=n,p=n},2476:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>i,_L:()=>d,ge:()=>o});var a=t(404),s=t(4317),l=t(559);let n=(0,a.xP)({reducerPath:"authApi",baseQuery:(0,s.cw)({baseUrl:l.D}),tagTypes:["Auth"],endpoints:e=>({register:e.mutation({query:e=>({url:"auth/register",method:"POST",body:e}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Auth"]}),login:e.mutation({query:e=>({url:"auth/login",method:"POST",body:e}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Auth"]})})}),{useRegisterMutation:o,useLoginMutation:d}=n,i=n},4149:function(e,r,t){e.exports=function(e,r){"use strict";let t=[{key:"title",getter:e=>e.getTitle()},{key:"html",getter:e=>e.getHtmlContainer()},{key:"confirmButtonText",getter:e=>e.getConfirmButton()},{key:"denyButtonText",getter:e=>e.getDenyButton()},{key:"cancelButtonText",getter:e=>e.getCancelButton()},{key:"footer",getter:e=>e.getFooter()},{key:"closeButtonHtml",getter:e=>e.getCloseButton()},{key:"iconHtml",getter:e=>e.getIconContent()},{key:"loaderHtml",getter:e=>e.getLoader()}],a=()=>{};return function(s){function l(r){let a={},s={},l=t.map(e=>e.key);return Object.entries(r).forEach(r=>{let[t,n]=r;l.includes(t)&&e.isValidElement(n)?(a[t]=n,s[t]=" "):s[t]=n}),[a,s]}function n(e,a){Object.entries(a).forEach(a=>{let[l,n]=a,o=t.find(e=>e.key===l).getter(s),d=r.createRoot(o);d.render(n),e.__roots.push(d)})}function o(e){e.__roots.forEach(e=>{e.unmount()}),e.__roots=[]}return class extends s{static argsToParams(r){if(!(e.isValidElement(r[0])||e.isValidElement(r[1])))return s.argsToParams(r);{let e={};return["title","html","icon"].forEach((t,a)=>{void 0!==r[a]&&(e[t]=r[a])}),e}}_main(e,r){this.__roots=[],this.__params=Object.assign({},r,e);let[t,s]=l(this.__params),d=s.willOpen||a,i=s.didOpen||a,u=s.didDestroy||a;return super._main(Object.assign({},s,{willOpen:e=>{n(this,t),d(e)},didOpen:e=>{setTimeout(()=>{i(e)})},didDestroy:e=>{u(e),o(this)}}))}update(e){Object.assign(this.__params,e),o(this);let[r,t]=l(this.__params);super.update(t),n(this,r)}}}}(t(2115),t(2669))},4936:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6874,23)),Promise.resolve().then(t.t.bind(t,2093,23)),Promise.resolve().then(t.t.bind(t,7735,23)),Promise.resolve().then(t.bind(t,9178)),Promise.resolve().then(t.t.bind(t,347,23)),Promise.resolve().then(t.bind(t,6604)),Promise.resolve().then(t.bind(t,7466)),Promise.resolve().then(t.bind(t,9632))},5374:(e,r,t)=>{"use strict";t.d(r,{G:()=>l,j:()=>s});var a=t(4540);let s=()=>(0,a.wA)(),l=a.d4},5495:(e,r,t)=>{"use strict";t.d(r,{P7:()=>n,Uc:()=>l,aG:()=>a,nW:()=>o,p3:()=>s});var a=function(e){return e.Role_Admin="admin",e.Role_Seller="seller",e.Role_Buyer="buyer",e}({}),s=function(e){return e[e.Gasoline=0]="Gasoline",e[e.Diesel=1]="Diesel",e[e.Electric=2]="Electric",e[e.Hybrid=3]="Hybrid",e}({}),l=function(e){return e[e.Manual=0]="Manual",e[e.Automatic=1]="Automatic",e}({}),n=function(e){return e[e.FourDoorSedan=0]="FourDoorSedan",e[e.PickUpTruck=1]="PickUpTruck",e[e.CarSUV=2]="CarSUV",e[e.CarVan=3]="CarVan",e}({}),o=function(e){return e[e.Available=0]="Available",e[e.Sold=1]="Sold",e[e.Reserved=2]="Reserved",e}({})},5695:(e,r,t)=>{"use strict";var a=t(8999);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},6604:(e,r,t)=>{"use strict";t.d(r,{Providers:()=>N});var a=t(5155),s=t(4540),l=t(5710),n=t(7864);let o=(0,l.Z0)({name:"cars",initialState:{cars:[],selectedCar:void 0,loading:!1,error:void 0},reducers:{setCars(e,r){e.cars=r.payload},setSelectedCar(e,r){e.selectedCar=r.payload},addCar(e,r){e.cars.push(r.payload)},updateCar(e,r){let t=e.cars.findIndex(e=>e.id===r.payload.id);-1!==t&&(e.cars[t]=r.payload)},deleteCar(e,r){e.cars=e.cars.filter(e=>e.id!==r.payload)},setLoading(e,r){e.loading=r.payload},setError(e,r){e.error=r.payload},clearSelectedCar(e){e.selectedCar=void 0}}}),{setCars:d,setSelectedCar:i,addCar:u,updateCar:c,deleteCar:m,setLoading:p,setError:h,clearSelectedCar:y}=o.actions,g=o.reducer;var f=t(7317),b=t(1809),v=t(784),S=t(2476);let x=(0,l.Z0)({name:"sellers",initialState:{sellers:[],selectedSeller:void 0,loading:!1,error:void 0},reducers:{setSellers(e,r){e.sellers=r.payload},setSelectedSeller(e,r){e.selectedSeller=r.payload},clearSelectedSeller(e){e.selectedSeller=void 0},addSeller(e,r){e.sellers.push(r.payload)},updateSeller(e,r){let t=e.sellers.findIndex(e=>e.id===r.payload.id);-1!==t&&(e.sellers[t]=r.payload)},deleteSeller(e,r){e.sellers=e.sellers.filter(e=>e.id!==r.payload)},setLoading(e,r){e.loading=r.payload},setError(e,r){e.error=r.payload}}}),{setSellers:k,setSelectedSeller:T,clearSelectedSeller:w,addSeller:A,updateSeller:E,deleteSeller:P,setLoading:_,setError:C}=x.actions,j=x.reducer;var B=t(2227);let R=(0,l.U1)({reducer:{car:g,brand:f.Ay,auth:v.Ay,seller:j,[n.Ay.reducerPath]:n.Ay.reducer,[b.Ay.reducerPath]:b.Ay.reducer,[S.Ay.reducerPath]:S.Ay.reducer,[B.Ay.reducerPath]:B.Ay.reducer},middleware:e=>e().concat(n.Ay.middleware,b.Ay.middleware,S.Ay.middleware,B.Ay.middleware)});function N(e){let{children:r}=e;return(0,a.jsx)(s.Kq,{store:R,children:r})}},7317:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>m,VO:()=>s});let a=(0,t(5710).Z0)({name:"brands",initialState:{brands:[],selectedBrand:void 0,loading:!1,error:void 0},reducers:{setBrands(e,r){e.brands=r.payload},setSelectedBrand(e,r){e.selectedBrand=r.payload},addBrand(e,r){e.brands.push(r.payload)},updateBrand(e,r){let t=e.brands.findIndex(e=>e.id===r.payload.id);-1!==t&&(e.brands[t]=r.payload)},deleteBrand(e,r){e.brands=e.brands.filter(e=>e.id!==r.payload)},setLoading(e,r){e.loading=r.payload},setError(e,r){e.error=r.payload},clearSelectedBrand(e){e.selectedBrand=void 0}}}),{setBrands:s,setSelectedBrand:l,addBrand:n,updateBrand:o,deleteBrand:d,setLoading:i,setError:u,clearSelectedBrand:c}=a.actions,m=a.reducer},7466:(e,r,t)=>{"use strict";t.d(r,{default:()=>c});var a=t(5155),s=t(6874),l=t.n(s),n=t(5695),o=t(5374),d=t(5495);let i=[{name:"หน้าแรก",path:"/"},{name:"ซื้อรถยนต์",path:"/car"},{name:"ขายรถยนต์",path:"/manages/car"},{name:"คำนวณค่างวด",path:"/loan-calculator"}],u=[{name:"จัดการยี่ห้อ",path:"/manages/brand"},{name:"จัดการรถยนต์",path:"/manages/car"},{name:"จัดการผู้จำหน่าย",path:"/manages/seller"}];function c(){let e=(0,n.usePathname)(),{role:r}=(0,o.G)(e=>e.auth),t=r===d.aG.Role_Admin||r===d.aG.Role_Seller;return(0,a.jsxs)(a.Fragment,{children:[i.map(r=>(0,a.jsx)("li",{children:(0,a.jsx)(l(),{className:e===r.path?"active":"",href:r.path,children:r.name})},r.path)),t&&(0,a.jsx)("li",{children:(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{children:"การจัดการ"}),(0,a.jsx)("ul",{className:"p-2 bg-[var(--color-neutral)]",children:u.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:e.path,children:e.name})},e.path))})]})})]})}},7735:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}},7864:(e,r,t)=>{"use strict";t.d(r,{$d:()=>i,Ay:()=>p,CW:()=>c,LQ:()=>o,Sb:()=>d,iB:()=>u});var a=t(404),s=t(4317),l=t(559);let n=(0,a.xP)({reducerPath:"carApi",baseQuery:(0,s.cw)({baseUrl:l.D}),tagTypes:["Car"],endpoints:e=>({getCarAll:e.query({query:e=>({url:"cars/getall",method:"GET",params:e}),keepUnusedDataFor:300,transformResponse:async e=>{var r;return{result:null!=(r=e.result)?r:[],meta:e.meta}},providesTags:["Car"]}),getCarById:e.query({query:e=>({url:"cars/getbyid/".concat(e),method:"GET"}),keepUnusedDataFor:300,transformResponse:async e=>{if(e.result)return e.result;throw Error(e.message)},providesTags:(e,r,t)=>[{type:"Car",carId:t}]}),createCar:e.mutation({query:e=>({url:"cars/create",method:"POST",body:e}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Car"]}),updateCar:e.mutation({query:e=>{let{formData:r,carId:t}=e;return{url:"cars/update/".concat(t),method:"PUT",body:r}},transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:(e,r,t)=>{let{carId:a}=t;return[{type:"Car",carId:a}]}}),deleteCar:e.mutation({query:e=>({url:"cars/delete/".concat(e),method:"PUT"}),transformResponse:e=>{if(e.result)return e.result;throw Error(e.message)},invalidatesTags:["Car"]})})}),{useGetCarAllQuery:o,useGetCarByIdQuery:d,useCreateCarMutation:i,useUpdateCarMutation:u,useDeleteCarMutation:c,usePrefetch:m}=n,p=n},9159:(e,r,t)=>{"use strict";t.d(r,{s:()=>s});class a extends Error{}function s(e,r){let t;if("string"!=typeof e)throw new a("Invalid token specified: must be a string");r||(r={});let s=+(!0!==r.header),l=e.split(".")[s];if("string"!=typeof l)throw new a(`Invalid token specified: missing part #${s+1}`);try{t=function(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw Error("base64 string is not of the correct length")}try{var t;return t=r,decodeURIComponent(atob(t).replace(/(.)/g,(e,r)=>{let t=r.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t}))}catch(e){return atob(r)}}(l)}catch(e){throw new a(`Invalid token specified: invalid base64 for part #${s+1} (${e.message})`)}try{return JSON.parse(t)}catch(e){throw new a(`Invalid token specified: invalid json for part #${s+1} (${e.message})`)}}a.prototype.name="InvalidTokenError"},9178:(e,r,t)=>{"use strict";t.d(r,{default:()=>g});var a=t(5155),s=t(9159),l=t(2115),n=t(5374),o=t(784),d=t(4752),i=t.n(d),u=t(4149),c=t.n(u),m=t(5695);let p="/login",h=c()(i()),y=()=>{let e=(0,n.j)(),r=(0,m.useRouter)();(0,l.useEffect)(()=>{let t=localStorage.getItem("token");if(t)try{let a=(0,s.s)(t);if(1e3*a.exp<Date.now()){e((0,o.ri)()),h.fire({icon:"warning",title:"Session หมดอายุ",text:"กรุณาเข้าสู่ระบบใหม่อีกครั้ง",confirmButtonText:"ตกลง"}).then(()=>{r.push(p)});return}e((0,o.LA)({...a,userId:a.userId,userName:a.userName,token:t}))}catch(t){localStorage.removeItem("token"),e((0,o.ri)()),r.push(p)}},[e,r])};function g(e){let{children:r}=e;return y(),(0,a.jsx)(a.Fragment,{children:r})}},9632:(e,r,t)=>{"use strict";t.d(r,{default:()=>d});var a=t(5155),s=t(5374),l=t(784),n=t(5695),o=t(2115);function d(){let{userName:e,token:r}=(0,s.G)(e=>e.auth),t=(0,n.useRouter)(),d=(0,s.j)(),[i,u]=(0,o.useState)(!1);return((0,o.useEffect)(()=>u(!0),[]),i)?(0,a.jsx)("div",{className:"flex items-center gap-2",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"hidden md:inline",children:["\uD83D\uDC4B สวัสดี ",e]}),(0,a.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,a.jsx)("div",{tabIndex:0,role:"button",className:"btn btn-ghost btn-circle avatar",children:(0,a.jsx)("div",{className:"w-10 rounded-full",children:(0,a.jsx)("img",{alt:"Avatar",src:"https://img.daisyui.com/images/stock/photo-1534528741775-53994a69daeb.webp"})})}),(0,a.jsxs)("ul",{tabIndex:0,className:"menu menu-sm dropdown-content bg-[var(--color-neutral)] rounded-box z-1 mt-3 w-52 p-2 shadow",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{onClick:()=>t.push("/profile"),children:"โปรไฟล์"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{onClick:()=>t.push("/settings"),children:"ตั้งค่า"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{onClick:()=>t.push("/register-seller"),children:"ลงทะเบียนขายรถ"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{onClick:()=>{d((0,l.ri)()),t.push("/login")},children:"ออกจากระบบ"})})]})]})]}):(0,a.jsx)(a.Fragment,{})}):null}}},e=>{var r=r=>e(e.s=r);e.O(0,[360,320,404,874,441,684,358],()=>r(4936)),_N_E=e.O()}]);